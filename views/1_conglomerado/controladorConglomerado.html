{{extend 'layout.html'}}
{{block head}}
{{=response.toolbar()}}
<style type="text/css">

    .cong_tabla .integer, .cong_tabla .date, .cong_tabla .string, .cong_tabla .double
    {
        margin-right: 2cm;
        width: 4cm;
    }

    .cong_tabla #Conglomerado_muestra_tipo, .cong_tabla #Conglomerado_muestra_uso_suelo_tipo,
    .cong_tabla #Conglomerado_muestra_estado, .cong_tabla #Conglomerado_muestra_vegetacion_tipo_aux,
    .cong_tabla #Conglomerado_muestra_tenencia
    {
        margin-right: 2cm;
        width: 4.5cm;
    }

    .sitio_tabla, .cong_tabla
    {
        table-layout: fixed;
        width: 120%;
    }

    .sitio_tabla .integer, .sitio_tabla .date, .sitio_tabla .string, .sitio_tabla .double
    {
        width: 1.2cm;
    }
    .sitio_tabla #Conjunta_sitio_imagen_control_elipsoide,
    .sitio_tabla #Conjunta_sitio_imagen_1_elipsoide,
    .sitio_tabla #Conjunta_sitio_imagen_2_elipsoide,
    .sitio_tabla #Conjunta_sitio_imagen_3_elipsoide,
    .sitio_tabla #Conjunta_sitio_imagen_4_elipsoide 
    {
        width: 1.8cm;
    }
    
    .centrar
    {
        text-align: center;
    }

    .derecha
    {
        text-align: right;
    }
    #enviar
    {
        float: left;
    }
<!--
    SQLFORM.widgets.string.widget
    SQLFORM.widgets.text.widget
    SQLFORM.widgets.password.widget
    SQLFORM.widgets.integer.widget
    SQLFORM.widgets.double.widget
    SQLFORM.widgets.time.widget
    SQLFORM.widgets.date.widget
    SQLFORM.widgets.datetime.widget
    SQLFORM.widgets.upload.widget
    SQLFORM.widgets.boolean.widget
    SQLFORM.widgets.options.widget
    SQLFORM.widgets.multiple.widget
    SQLFORM.widgets.radio.widget
    SQLFORM.widgets.checkboxes.widget
    SQLFORM.widgets.autocomplete
-->

</style>
{{end}}



<form action="" enctype="multipart/form-data" method="post">
    <input name="_formname" type="hidden" value="imagenForm">
    <input class="string" name="imagen_nombre" type="text" value="">
    <input class="upload" name="imagen_archivo" type="file">
    <input type="submit" value="Submit">
</form>
 


{{=congForm.custom.begin}}
<fieldset>
    <legend>
        Datos del conglomerado
    </legend>
    <table class='cong_tabla'>
        <tr>
            <td>
                <div>
                    {{=congForm.custom.label.nombre}}
                </div>
                <div>
                    {{=congForm.custom.widget.nombre}}
                </div>
            </td>
            <td>
                <div>
                    {{=congForm.custom.label.fecha_visita}}
                </div>
                <div>
                    {{=congForm.custom.widget.fecha_visita}}
                </div>
            </td>
            <td>
                <div>
                    {{=congForm.custom.label.tipo}}
                </div>
                <div>
                    {{=congForm.custom.widget.tipo}}
                </div>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
                <div>
                    {{=congForm.custom.label.estado}}
                </div>
                <div>
                    {{=congForm.custom.widget.estado}}
                </div>
            </td>
            <td>
                <div>
                    {{=congForm.custom.label.municipio}}
                </div>
                <div>
                    {{=congForm.custom.widget.municipio}}
                </div>
            </td>
            <td>
                <div>
                    {{=congForm.custom.label.predio}}
                </div>
                <div>
                    {{=congForm.custom.widget.predio}}
                </div>
            </td>
            <td>
                <div>
                    {{=congForm.custom.label.tenencia}}
                </div>
                <div>
                    {{=congForm.custom.widget.tenencia}}
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div>
                    {{=congForm.custom.label.uso_suelo_tipo}}
                </div>
                <div>
                    {{=congForm.custom.widget.uso_suelo_tipo}}
                </div>
            </td>
            <td>
                <!--La clase Vegetación sirve para el JQuery que desvanece/reaparece el campo-->
                <div class="vegetacion">
                     {{=congForm.custom.label.vegetacion_tipo_aux}}
                </div>
                <div class="vegetacion">
                    {{=congForm.custom.widget.vegetacion_tipo_aux}}
                </div>
            </td>
            <td>
                <div class="vegetacion">
                    {{=congForm.custom.label.perturbado}}
                </div>
                <div class="vegetacion">
                    {{=congForm.custom.widget.perturbado}}
                </div>
            </td>
            <td></td>
        </tr>
    </table>
    <div>
        <div>
            {{=congForm.custom.label.comentario}}
        </div>
        <div>
            {{=congForm.custom.widget.comentario}}
        </div>
    </div>
</fieldset>
{{=congForm.custom.end}}


<fieldset>
    <legend>
        Datos de los sitios y punto de control
    </legend>
    {{=controlForm.custom.begin}}
    <table class="sitio_tabla">
        <tr>
            <th class="centrar">        
                {{=controlForm.custom.label.existe}}
            </th>
            <th>
                Elemento
            </th>
            <th colspan="3", class="centrar">
                Latitud
            </th>
            <th colspan="3", class="centrar">
                Longitud
            </th>
            <th>
                {{=controlForm.custom.label.elipsoide}}
            </th>
            <th>
                 {{=controlForm.custom.label.altitud}}
            </th>
            <th>
                 {{=controlForm.custom.label.gps_error}}
            </th>
            <th>
                 {{=controlForm.custom.label.evidencia}}
            </th>
            <th>
                {{=controlForm.custom.label.archivo_nombre_original}}
            </th>
        </tr>
        <tr>
            <th>
            </th>
            <th>
            </th>
            <th>
                {{=controlForm.custom.label.lat_grado}}
            </th>
            <th>
                {{=controlForm.custom.label.lat_min}}
            </th>
            <th>
                {{=controlForm.custom.label.lat_seg}}
            </th>
            <th>
                {{=controlForm.custom.label.lon_grado}}
            </th>
            <th>
                {{=controlForm.custom.label.lon_min}}
            </th>
            <th>
                {{=controlForm.custom.label.lon_seg}}
            </th>
            <th>
            </th>
            <th>
            </th>
            <th>
            </th>
            <th>
            </th>
            <th>                
            </th>
        </tr>
        <tr>
            <td>
            </td>
            <td>
                Punto de control
            </td>                
            <td>
                {{=controlForm.custom.widget.lat_grado}}
            </td>
            <td>
                {{=controlForm.custom.widget.lat_min}}
            </td>
            <td>
                {{=controlForm.custom.widget.lat_seg}}
            </td>
            <td>
                {{=controlForm.custom.widget.lon_grado}}
            </td>
            <td>
                {{=controlForm.custom.widget.lon_min}}
            </td>
            <td>
                {{=controlForm.custom.widget.lon_seg}}
            </td>
            <td>
                {{=controlForm.custom.widget.elipsoide}}
            </td>
            <td>
                {{=controlForm.custom.widget.altitud}}
            </td>
            <td>
                {{=controlForm.custom.widget.gps_error}}
            </td>
            <td>
                {{=controlForm.custom.widget.evidencia}}
            </td>
            <td>
                {{=controlForm.custom.widget.archivo_nombre_original}}
            </td>

        </tr>
    </table>
    {{=controlForm.custom.end}}

    {{=sitio1Form.custom.begin}}
    <table class="sitio_tabla">
        <tr>
            <td class="centrar">
                {{=sitio1Form.custom.widget.existe}}
            </td>
            <td>
                Sitio 1
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.lat_grado}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.lat_min}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.lat_seg}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.lon_grado}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.lon_min}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.lon_seg}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.elipsoide}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.altitud}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.gps_error}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.evidencia}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_1">
                    {{=sitio1Form.custom.widget.archivo_nombre_original}}
                </div>
            </td>

        </tr>
    </table>
    {{=sitio1Form.custom.end}}

    {{=sitio2Form.custom.begin}}
    <table class="sitio_tabla">
        <tr>
            <td class="centrar">
                {{=sitio2Form.custom.widget.existe}}
            </td>
            <td>
                Sitio 2
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.lat_grado}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.lat_min}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.lat_seg}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.lon_grado}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.lon_min}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.lon_seg}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.elipsoide}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.altitud}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.gps_error}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.evidencia}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_2">
                    {{=sitio2Form.custom.widget.archivo_nombre_original}}
                </div>
            </td>

        </tr>
    </table>
    {{=sitio2Form.custom.end}}

    {{=sitio3Form.custom.begin}}
    <table class="sitio_tabla">
        <tr>
            <td class="centrar">
                {{=sitio3Form.custom.widget.existe}}
            </td>
            <td>
                Sitio 3
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.lat_grado}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.lat_min}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.lat_seg}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.lon_grado}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.lon_min}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.lon_seg}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.elipsoide}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.altitud}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.gps_error}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.evidencia}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_3">
                    {{=sitio3Form.custom.widget.archivo_nombre_original}}
                </div>
            </td>
        </tr>
    </table>
    {{=sitio3Form.custom.end}}

    {{=sitio4Form.custom.begin}}
    <table class="sitio_tabla">
         <tr>
            <td class="centrar">
                {{=sitio4Form.custom.widget.existe}}
            </td>
            <td>
                Sitio 4
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.lat_grado}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.lat_min}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.lat_seg}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.lon_grado}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.lon_min}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.lon_seg}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.elipsoide}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.altitud}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.gps_error}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.evidencia}}
                </div>
            </td>
            <td>
                <div class="Sitio_info_4">
                    {{=sitio4Form.custom.widget.archivo_nombre_original}}
                </div>
            </td>
        </tr>
    </table>
    {{=sitio4Form.custom.end}}
</fieldset>
<button onclick="document.getElementById('forma_conglomerado').submit();
                 document.getElementById('forma_sitio1').submit();
                 document.getElementById('forma_sitio2').submit();
                 document.getElementById('forma_sitio3').submit();
                 document.getElementById('forma_sitio4').submit();
                 document.getElementById('forma_control').submit()" id=enviar>
    Enviar formulario
</button>
<br/>
<div>
<h2>Submitted variables</h2>
{{=BEAUTIFY(request.vars)}}
<h2>Accepted variables</h2>
{{=BEAUTIFY(congForm.vars)}}
<h2>Errors in form</h2>
{{=BEAUTIFY(congForm.errors)}}
</div>

<script>
    $(document).ready
    (
        function()
        {
           
           $('.vegetacion').hide();
           $('#Conglomerado_muestra_vegetacion_tipo_aux').val("1");
           $('#Conglomerado_muestra_uso_suelo_tipo_aux').val("");
           
           $('.Sitio_info_1').show();
           $('.Sitio_info_2').show();
           $('.Sitio_info_3').show();
           $('.Sitio_info_4').show();
        }
    )

    $('#Conjunta_sitio_imagen_1_existe').change
    (
        function()
        {
            if($(this).prop('checked'))
            {
                $('.Sitio_info_1').fadeIn();
             }
            else
            {
                $('.Sitio_info_1').fadeOut();
            }
        }
    )

    $('#Conjunta_sitio_imagen_2_existe').change
    (
        function()
        {
            if($(this).prop('checked'))
            {
                $('.Sitio_info_2').fadeIn();
             }
            else
            {
                $('.Sitio_info_2').fadeOut();
            }
        }
    )

    $('#Conjunta_sitio_imagen_3_existe').change
    (
        function()
        {
            if($(this).prop('checked'))
            {
                $('.Sitio_info_3').fadeIn();
             }
            else
            {
                $('.Sitio_info_3').fadeOut();
            }
        }
    )

    $('#Conjunta_sitio_imagen_4_existe').change
    (
        function()
        {
            if($(this).prop('checked'))
            {
                $('.Sitio_info_4').fadeIn();
             }
            else
            {
                $('.Sitio_info_4').fadeOut();
            }
        }
    )

    $('#Conglomerado_muestra_uso_suelo_tipo').change
    (
        function()
        {
            if($(this).find(":selected").text()=="Vegetación")
            {
                $('.vegetacion').fadeIn();
                $('#Conglomerado_muestra_vegetacion_tipo_aux').val("");
            }
            else
            {
                $('.vegetacion').fadeOut();
                $('#Conglomerado_muestra_vegetacion_tipo_aux').val("1");
            }
        }
    )

</script>
